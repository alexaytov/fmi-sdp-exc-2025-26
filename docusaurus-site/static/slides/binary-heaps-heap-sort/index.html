<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binary Heaps –∏ Heap Sort - FMI SDP</title>

    <!-- Reveal.js Core -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/dist/reveal.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/dist/theme/white.css">

    <!-- Code Highlighting - using highlight.js directly -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">

    <!-- Custom FMI Styles -->
    <style>
        .reveal .slides {
            text-align: left;
        }
        .reveal h1 {
            font-size: 2.2em;
            text-transform: none;
        }
        .reveal h2 {
            font-size: 1.8em;
            text-transform: none;
        }
        .reveal h3 {
            font-size: 1.4em;
            text-transform: none;
        }
        .reveal p, .reveal li {
            font-size: 0.85em;
            line-height: 1.4;
        }
        .reveal pre code {
            max-height: 500px;
            font-size: 0.75em;
        }
        .reveal code {
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
        }
        .reveal {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            font-size: 32px;
        }
        .reveal ul, .reveal ol {
            margin-left: 1em;
        }
        .reveal li {
            margin-bottom: 0.4em;
        }
        .reveal table {
            font-size: 0.8em;
        }
        .reveal img {
            max-width: 70%;
            max-height: 400px;
            margin: 0.5em auto;
            display: block;
            object-fit: contain;
        }
        /* Two-column layout */
        .reveal .columns {
            display: flex;
            gap: 2em;
            align-items: center;
        }
        .reveal .column {
            flex: 1;
        }
        .reveal .column img {
            max-width: 100%;
            max-height: 450px;
            margin: 0;
        }
        .reveal .column.left {
            text-align: left;
        }
        .reveal .column.right {
            text-align: center;
        }
        /* Back to lecture button */
        .back-button {
            position: fixed;
            bottom: 10px;
            left: 10px;
            z-index: 100;
            font-size: 14px;
            color: #666;
            text-decoration: none;
            background: rgba(255,255,255,0.9);
            padding: 5px 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
            transition: all 0.2s;
        }
        .back-button:hover {
            background: rgba(255,255,255,1);
            color: #333;
            border-color: #999;
        }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">
            <section data-markdown>
<script type="text/template">
# üìä Binary Heaps

## Heap Sort Algorithm

**–õ–µ–∫—Ü–∏—è 12** ‚Ä¢ –°—Ç—Ä—É–∫—Ç—É—Ä–∏ –æ—Ç –î–∞–Ω–Ω–∏ –∏ –ü—Ä–æ–≥—Ä–∞–º–∏—Ä–∞–Ω–µ
</script>
</section>
<section data-markdown>
<script type="text/template">
## üìã –°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ

üéØ **Heap Property**

üèóÔ∏è **Heap Structure**

‚¨ÜÔ∏è **Heapify Operations**

üìà **Heap Sort**

üí° **Priority Queue**

Note:
Heaps —Å–∞ –ø–µ—Ä—Ñ–µ–∫—Ç–Ω–∏ –∑–∞ priority queues –∏ heap sort!
</script>
</section>
<section data-background="#e7f3ff" data-markdown>
<script type="text/template">
# üéØ –ß–∞—Å—Ç 1

## Heap Property
</script>
</section>
<section data-markdown>
<script type="text/template">
## –ö–∞–∫–≤–æ –µ Heap?

**Complete Binary Tree** —Å—ä—Å —Å–ø–µ—Ü–∏–∞–ª–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ

**Max Heap:** Parent ‚â• Children
```
      100
     /   \
   80     90
  / \    /
 40  60 50
```

**Min Heap:** Parent ‚â§ Children
```
       10
     /   \
   20     15
  / \    /
 40  60 30
```

Note:
Heap –µ –¥—ä—Ä–≤–æ, –Ω–æ –ù–ï –µ BST - –Ω—è–º–∞ —Å–≤–æ–π—Å—Ç–≤–æ—Ç–æ left < root < right!
</script>
</section>
<section data-markdown>
<script type="text/template">
## Array Representation

**Complete Binary Tree ‚Üí Array**

```
      100
     /   \
   80     90
  / \    /
 40  60 50

Array: [100, 80, 90, 40, 60, 50]
Index:   0   1   2   3   4   5
```

**–§–æ—Ä–º—É–ª–∏:**
- Parent(i) = (i-1) / 2
- Left(i) = 2*i + 1
- Right(i) = 2*i + 2

Note:
Array –ø—Ä–µ–¥—Å—Ç–∞–≤—è–Ω–µ—Ç–æ –ø—Ä–∞–≤–∏ heap –º–Ω–æ–≥–æ –µ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –∑–∞ –ø–∞–º–µ—Ç!
</script>
</section>
<section data-markdown>
<script type="text/template">
## Heap Property (Formally)

**Max Heap:**
```
arr[parent(i)] ‚â• arr[i]  –∑–∞ –≤—Å–∏—á–∫–∏ i > 0
```

**Min Heap:**
```
arr[parent(i)] ‚â§ arr[i]  –∑–∞ –≤—Å–∏—á–∫–∏ i > 0
```

**Complete Tree:** –í—Å–∏—á–∫–∏ –Ω–∏–≤–∞ —Å–∞ –ø—ä–ª–Ω–∏ –æ—Å–≤–µ–Ω –ø–æ—Å–ª–µ–¥–Ω–æ—Ç–æ (–∫–æ–µ—Ç–æ –µ –∑–∞–ø—ä–ª–Ω–µ–Ω–æ –æ—Ç–ª—è–≤–æ –Ω–∞–¥—è—Å–Ω–æ)

Note:
–¢–µ–∑–∏ —Å–≤–æ–π—Å—Ç–≤–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞—Ç –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏!
</script>
</section>
<section data-background="#e8f5e9" data-markdown>
<script type="text/template">
# –ß–∞—Å—Ç 2

## Heapify Operations
</script>
</section>
<section data-markdown>
<script type="text/template">
## Heapify Down (Sift Down)

**–¶–µ–ª:** –ü—Ä–µ–º–µ—Å—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç –Ω–∞–¥–æ–ª—É –¥–æ –ø—Ä–∞–≤–∏–ª–Ω–∞—Ç–∞ –ø–æ–∑–∏—Ü–∏—è

```cpp
void heapifyDown(vector<int>& arr, int n, int i) {
    int largest = i;
    int left = 2 * i + 1;
    int right = 2 * i + 2;

    // –ù–∞–º–µ—Ä–∏ –Ω–∞–π-–≥–æ–ª–µ–º–∏—è –æ—Ç —Ç—Ä–∏—Ç–µ
    if (left < n && arr[left] > arr[largest])
        largest = left;

    if (right < n && arr[right] > arr[largest])
        largest = right;

    // –ê–∫–æ –Ω–µ –µ –ø—Ä–∞–≤–∏–ª–Ω–æ, —Ä–∞–∑–º–µ–Ω–∏ –∏ –ø—Ä–æ–¥—ä–ª–∂–∏
    if (largest != i) {
        swap(arr[i], arr[largest]);
        heapifyDown(arr, n, largest);
    }
}
```

**Complexity: O(log n)**

Note:
Heapify down –µ –æ—Å–Ω–æ–≤–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –∑–∞ –ø–æ–¥–¥—ä—Ä–∂–∞–Ω–µ –Ω–∞ heap —Å–≤–æ–π—Å—Ç–≤–æ—Ç–æ!
</script>
</section>
<section data-markdown>
<script type="text/template">
## Heapify Up (Sift Up)

**–¶–µ–ª:** –ü—Ä–µ–º–µ—Å—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç –Ω–∞–≥–æ—Ä–µ –¥–æ –ø—Ä–∞–≤–∏–ª–Ω–∞—Ç–∞ –ø–æ–∑–∏—Ü–∏—è

```cpp
void heapifyUp(vector<int>& arr, int i) {
    int parent = (i - 1) / 2;

    // –ê–∫–æ —Ç–µ–∫—É—â–∏—è—Ç –µ –ø–æ-–≥–æ–ª—è–º –æ—Ç parent, —Ä–∞–∑–º–µ–Ω–∏
    if (i > 0 && arr[i] > arr[parent]) {
        swap(arr[i], arr[parent]);
        heapifyUp(arr, parent);
    }
}
```

**–ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ –ø—Ä–∏:** Insert –≤ heap

**Complexity: O(log n)**

Note:
Heapify up "–±—É–±—É–ª–∏—Ä–∞" –µ–ª–µ–º–µ–Ω—Ç–∞ –Ω–∞–≥–æ—Ä–µ –¥–æ–∫–∞—Ç–æ –Ω–∞–º–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª–Ω–æ—Ç–æ –º—É –º—è—Å—Ç–æ!
</script>
</section>
<section data-markdown>
<script type="text/template">
## Build Heap

**–û—Ç unsorted array ‚Üí Max Heap**

```cpp
void buildHeap(vector<int>& arr) {
    int n = arr.size();

    // Heapify –≤—Å–∏—á–∫–∏ non-leaf nodes
    for (int i = n / 2 - 1; i >= 0; i--) {
        heapifyDown(arr, n, i);
    }
}
```

**Complexity: O(n)** - –Ω–µ –µ O(n log n)!

**–ó–∞—â–æ O(n)?** –ü–æ–≤–µ—á–µ—Ç–æ nodes —Å–∞ –±–ª–∏–∑–æ –¥–æ –ª–∏—Å—Ç–∞—Ç–∞ ‚Üí –º–∞–ª–∫–∞ –≤–∏—Å–æ—á–∏–Ω–∞

Note:
–£–¥–∏–≤–∏—Ç–µ–ª–Ω–æ, build heap –µ –ª–∏–Ω–µ–π–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è!
</script>
</section>
<section data-background="#fff3e0" data-markdown>
<script type="text/template">
# –ß–∞—Å—Ç 3

## Heap Operations
</script>
</section>
<section data-markdown>
<script type="text/template">
## Insert

```cpp
void insert(vector<int>& heap, int value) {
    // 1. –î–æ–±–∞–≤–∏ –≤ –∫—Ä–∞—è
    heap.push_back(value);

    // 2. Heapify up
    heapifyUp(heap, heap.size() - 1);
}
```

**Steps:**
```
Insert 95:

Before:      100        After:     100
            /   \                 /   \
          80    90              95    90
         / \                   / \
        40  60                80  60
                             /
                            40

Step 1: Add ‚Üí Step 2: Heapify up
```

**Complexity: O(log n)**

Note:
Insert –≤–∏–Ω–∞–≥–∏ –¥–æ–±–∞–≤—è –≤ –∫—Ä–∞—è –∏ –ø–æ—Å–ª–µ heapify up!
</script>
</section>
<section data-markdown>
<script type="text/template">
## Extract Max (Delete)

```cpp
int extractMax(vector<int>& heap) {
    if (heap.empty()) return -1;

    // 1. –ó–∞–ø–∞–∑–∏ –∫–æ—Ä–µ–Ω–∞ (max)
    int max = heap[0];

    // 2. –ü—Ä–µ–º–µ—Å—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—è –Ω–∞ –∫–æ—Ä–µ–Ω–∞
    heap[0] = heap.back();
    heap.pop_back();

    // 3. Heapify down –æ—Ç –∫–æ—Ä–µ–Ω–∞
    if (!heap.empty())
        heapifyDown(heap, heap.size(), 0);

    return max;
}
```

**Complexity: O(log n)**

Note:
Extract –≤–∏–Ω–∞–≥–∏ –ø—Ä–µ–º–µ—Å—Ç–≤–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—è –µ–ª–µ–º–µ–Ω—Ç –Ω–∞ –∫–æ—Ä–µ–Ω–∞ –∏ heapify down!
</script>
</section>
<section data-markdown>
<script type="text/template">
## Heap Operations Summary

| Operation | Complexity |
|-----------|------------|
| **Build Heap** | O(n) |
| **Insert** | O(log n) |
| **Extract Max** | O(log n) |
| **Get Max** | O(1) |
| **Heapify** | O(log n) |
| **Space** | O(n) |

Note:
Heap –æ–ø–µ—Ä–∞—Ü–∏–∏—Ç–µ —Å–∞ –º–Ω–æ–≥–æ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏!
</script>
</section>
<section data-background="#f3e5f5" data-markdown>
<script type="text/template">
# –ß–∞—Å—Ç 4

## Heap Sort
</script>
</section>
<section data-markdown>
<script type="text/template">
## Heap Sort Algorithm

**–ò–¥–µ—è:** Build max heap, –ø–æ—Å–ª–µ extract max n –ø—ä—Ç–∏

```cpp
void heapSort(vector<int>& arr) {
    int n = arr.size();

    // 1. Build max heap - O(n)
    buildHeap(arr);

    // 2. Extract elements one by one - O(n log n)
    for (int i = n - 1; i > 0; i--) {
        // –ü—Ä–µ–º–µ—Å—Ç–∏ current root –≤ –∫—Ä–∞—è
        swap(arr[0], arr[i]);

        // Heapify –Ω–∞–º–∞–ª–µ–Ω–∏—è heap
        heapifyDown(arr, i, 0);
    }
}
```

**Total Complexity: O(n log n)**

Note:
Heap sort –µ in-place —Å–æ—Ä—Ç–∏—Ä–∞—â –∞–ª–≥–æ—Ä–∏—Ç—ä–º!
</script>
</section>
<section data-markdown>
<script type="text/template">
## Heap Sort Example

```
Original: [4, 10, 3, 5, 1]

Step 1: Build Max Heap
       10
      /  \
     5    3
    / \
   4   1
Array: [10, 5, 3, 4, 1]

Step 2: Swap & Heapify
[1, 5, 3, 4 | 10]  ‚Üí Heapify ‚Üí [5, 4, 3, 1 | 10]
[1, 4, 3 | 5, 10]  ‚Üí Heapify ‚Üí [4, 1, 3 | 5, 10]
[3, 1 | 4, 5, 10]  ‚Üí Heapify ‚Üí [3, 1 | 4, 5, 10]
[1 | 3, 4, 5, 10]

Sorted: [1, 3, 4, 5, 10]
```

Note:
Heap sort –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–æ—Å—Ç—Ä–æ—è–≤–∞ —Å–æ—Ä—Ç–∏—Ä–∞–Ω –º–∞—Å–∏–≤ –æ—Ç–¥—è—Å–Ω–æ –Ω–∞–ª—è–≤–æ!
</script>
</section>
<section data-markdown>
<script type="text/template">
## Heap Sort Properties

**–ü—Ä–µ–¥–∏–º—Å—Ç–≤–∞:**
- ‚úÖ O(n log n) worst case
- ‚úÖ In-place (O(1) –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –ø–∞–º–µ—Ç)
- ‚úÖ –ù–µ –µ adaptive (–≤–∏–Ω–∞–≥–∏ O(n log n))

**–ù–µ–¥–æ—Å—Ç–∞—Ç—ä—Ü–∏:**
- ‚ùå –ù–µ –µ stable
- ‚ùå –ü–æ-–±–∞–≤–µ–Ω –æ—Ç Quick Sort –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞
- ‚ùå –õ–æ—à cache locality

Note:
Heap sort –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞ O(n log n), –Ω–æ Quick Sort –µ –ø–æ-–±—ä—Ä–∑ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞!
</script>
</section>
<section data-background="#e0f2f1" data-markdown>
<script type="text/template">
# –ß–∞—Å—Ç 5

## Priority Queue
</script>
</section>
<section data-markdown>
<script type="text/template">
## Priority Queue —Å Heap

**std::priority_queue:**
```cpp
#include <queue>

// Max heap (default)
priority_queue<int> pq;
pq.push(5);
pq.push(10);
pq.push(3);

cout << pq.top();  // 10
pq.pop();
cout << pq.top();  // 5

// Min heap
priority_queue<int, vector<int>, greater<int>> minPq;
minPq.push(5);
minPq.push(10);
minPq.push(3);

cout << minPq.top();  // 3
```

Note:
STL priority_queue –∏–∑–ø–æ–ª–∑–≤–∞ heap –≤—ä—Ç—Ä–µ—à–Ω–æ!
</script>
</section>
<section data-markdown>
<script type="text/template">
## Priority Queue Applications

**Task Scheduling:**
```cpp
struct Task {
    string name;
    int priority;

    bool operator<(const Task& other) const {
        return priority < other.priority;
    }
};

priority_queue<Task> taskQueue;
taskQueue.push({"Email", 2});
taskQueue.push({"Meeting", 5});
taskQueue.push({"Coffee", 1});

Task next = taskQueue.top();  // Meeting (priority 5)
```

**–î—Ä—É–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
- Dijkstra's algorithm
- Huffman coding
- Event-driven simulation
- Load balancing

Note:
Priority queue –µ –∫—Ä–∏—Ç–∏—á–Ω–∞ –∑–∞ –º–Ω–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∏!
</script>
</section>
<section data-background="#e8eaf6" data-markdown>
<script type="text/template">
# –û–±–æ–±—â–µ–Ω–∏–µ
</script>
</section>
<section data-markdown>
<script type="text/template">
## –ö–ª—é—á–æ–≤–∏ –ò–∑–≤–æ–¥–∏

**Heap Structure:**
- Complete binary tree
- Array representation
- Parent-child —Ñ–æ—Ä–º—É–ª–∏

**Heap Property:**
- Max heap: parent ‚â• children
- Min heap: parent ‚â§ children

**Operations:**
- Build: O(n)
- Insert/Extract: O(log n)
- Heapify: O(log n)

**Heap Sort:**
- O(n log n) guaranteed
- In-place —Å–æ—Ä—Ç–∏—Ä–∞–Ω–µ
- –ù–µ –µ stable

Note:
Heaps —Å–∞ –º–æ—â–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç!
</script>
</section>
<section data-markdown>
<script type="text/template">
## Sorting Algorithms Comparison

| Algorithm | Best | Average | Worst | Space | Stable |
|-----------|------|---------|-------|-------|--------|
| **Heap Sort** | O(n log n) | O(n log n) | O(n log n) | O(1) | ‚ùå |
| **Quick Sort** | O(n log n) | O(n log n) | O(n¬≤) | O(log n) | ‚ùå |
| **Merge Sort** | O(n log n) | O(n log n) | O(n log n) | O(n) | ‚úÖ |

Note:
Heap sort –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞ O(n log n), –Ω–æ Merge Sort –µ stable!
</script>
</section>
<section data-markdown>
<script type="text/template">
## –ó–∞ –ò–∑–ø–∏—Ç–∞

‚úÖ **Array representation** - Parent/Left/Right —Ñ–æ—Ä–º—É–ª–∏

‚úÖ **Heapify –æ–ø–µ—Ä–∞—Ü–∏–∏** - down vs up

‚úÖ **Build heap** - O(n) –Ω–µ O(n log n)!

‚úÖ **Heap sort** - build + extract

‚úÖ **Priority queue** - heap –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

Note:
–¢–µ–∑–∏ —Ç–æ—á–∫–∏ —Å–∞ —á–µ—Å—Ç–æ –Ω–∞ –∏–∑–ø–∏—Ç–∏!
</script>
</section>
<section data-markdown>
<script type="text/template">
## –î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –†–µ—Å—É—Ä—Å–∏

**Binary Heaps:**
- [Heap Data Structure - GeeksforGeeks](https://www.geeksforgeeks.org/heap-data-structure/)
- [std::priority_queue - cppreference](https://en.cppreference.com/w/cpp/container/priority_queue)

**Visualizations:**
- [Heap Visualization](https://www.cs.usfca.edu/~galles/visualization/Heap.html)

**Practice:**
- [LeetCode - Heap Problems](https://leetcode.com/tag/heap-priority-queue/)

Note:
–ü—Ä–∞–∫—Ç–∏–∫–∞—Ç–∞ –µ –∫–ª—é—á–æ–≤–∞ - –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω heap!
</script>
</section>
<section data-background="#4caf50" data-markdown>
<script type="text/template">
# –ë–ª–∞–≥–æ–¥–∞—Ä—è –∑–∞ –í–Ω–∏–º–∞–Ω–∏–µ—Ç–æ!

## –í—ä–ø—Ä–æ—Å–∏? üéì

**–°–ª–µ–¥–≤–∞—â–∞ –ª–µ–∫—Ü–∏—è:** Graphs

Note:
–í—Ä–µ–º–µ –∑–∞ –≤—ä–ø—Ä–æ—Å–∏!
</script>
</section>

        </div>
    </div>

    <!-- Navigation Helper -->
    <a href="/fmi-sdp-exc-2025-26/docs/binary-heaps-heap-sort/lecture" class="back-button">
        ‚Üê Back to Lecture
    </a>

    <!-- Reveal.js Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/dist/reveal.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/plugin/notes/notes.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/plugin/markdown/markdown.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/plugin/highlight/highlight.js"></script>

    <!-- marked library required by reveal.js markdown plugin -->
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.0/marked.min.js"></script>

    <script>
        Reveal.initialize({
            hash: true,
            history: true,
            slideNumber: 'c/t',
            showSlideNumber: 'all',
            transition: 'slide',
            controls: true,
            progress: true,
            center: true,
            width: 1280,
            height: 720,
            margin: 0.04,
            plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ],
            markdown: {
                smartypants: false,
                gfm: true,
                breaks: false,
                pedantic: false,
                sanitize: false,
                smartLists: true
            },
            highlight: {
                highlightOnLoad: true,
                escapeHTML: false
            }
        });
    </script>
</body>
</html>